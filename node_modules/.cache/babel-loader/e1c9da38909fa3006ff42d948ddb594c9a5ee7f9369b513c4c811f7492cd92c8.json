{"ast":null,"code":"export default {\n  data: () => ({\n    fristName: '',\n    lastName: '',\n    salary: '',\n    roles: '',\n    dialogCreate: false,\n    dialogDelete: false,\n    headers: [{\n      text: 'ไอดี',\n      align: 'start',\n      sortable: false,\n      value: 'id'\n    }, {\n      text: 'ชื่อ',\n      value: 'fristName'\n    }, {\n      text: 'นามสกุล',\n      value: 'lastName'\n    }, {\n      text: 'เงินเดือน',\n      value: 'salary'\n    }, {\n      text: 'ตำแหน่ง',\n      value: 'role'\n    }, {\n      text: 'จัดการ',\n      value: 'actions',\n      sortable: false\n    }],\n    employeeItem: [],\n    editedIndex: -1,\n    editedItem: {\n      name: '',\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0\n    },\n    defaultItem: {\n      name: '',\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0\n    },\n    formTitle: '',\n    idEmployee: '',\n    idforDelete: ''\n  }),\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    }\n  },\n  created() {\n    this.initialize();\n  },\n  methods: {\n    async initialize() {\n      this.employeeItem = [];\n      try {\n        var data = await this.axios.get('http://localhost:8000/employee');\n        console.log('data employee ====>', data);\n        this.employeeItem = data.data;\n      } catch (error) {}\n    },\n    openDialog(Action, item) {\n      this.formTitle = '';\n      if (Action === 'add') {\n        this.dialogCreate = true;\n        this.formTitle = 'เพิ่มข้อมูล';\n        this.editedItem = item;\n      } else {\n        this.formTitle = 'แก้ไขข้อมูล';\n        this.dialogCreate = true;\n        this.fristName = item.fristName;\n        this.lastName = item.lastName;\n        this.salary = item.salary;\n        this.roles = item.role.name;\n        this.idEmployee = item.id;\n      }\n    },\n    editItem(item) {\n      console.log('item select', item);\n      this.editedIndex = this.employeeItem.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      this.idforDelete = item.id;\n      this.dialogDelete = true;\n    },\n    async deleteItemConfirm() {\n      try {\n        var response = await this.axios.delete('http://localhost:8000/employee/' + this.idforDelete);\n        this.initialize();\n      } catch (error) {\n        console.log(error.message);\n      }\n      this.closeDelete();\n    },\n    close() {\n      this.dialogCreate = false;\n      this.editedItem = [];\n      this.editedIndex = -1;\n      this.defaultItem = {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0\n      };\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    async save(action) {\n      var data = {\n        fristName: this.fristName,\n        lastName: this.lastName,\n        salary: this.salary,\n        role: {\n          name: this.roles\n        },\n        skills: [{\n          skill: ''\n        }]\n      };\n      if (action === 'เพิ่มข้อมูล') {\n        try {\n          var dataResponse = await this.axios.post('http://localhost:8000/employee', data);\n          console.log('dataResponse ====>', dataResponse);\n          this.close();\n          this.initialize();\n        } catch (error) {\n          console.log(error.message);\n        }\n      } else {\n        try {\n          var dataResponse = await this.axios.put('http://localhost:8000/employee/' + this.idEmployee, data);\n          console.log('dataResponse ====>', dataResponse);\n          this.close();\n          this.initialize();\n        } catch (error) {\n          console.log(error.message);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","fristName","lastName","salary","roles","dialogCreate","dialogDelete","headers","text","align","sortable","value","employeeItem","editedIndex","editedItem","name","calories","fat","carbs","protein","defaultItem","formTitle","idEmployee","idforDelete","watch","dialog","val","close","closeDelete","created","initialize","methods","axios","get","console","log","error","openDialog","Action","item","role","id","editItem","indexOf","Object","assign","deleteItem","deleteItemConfirm","response","delete","message","$nextTick","save","action","skills","skill","dataResponse","post","put"],"sources":["src/components/Table.vue"],"sourcesContent":["<template>\r\n    <div>\r\n    <v-data-table\r\n        :headers=\"headers\"\r\n        :items=\"employeeItem\"\r\n        class=\"elevation-1\"\r\n      >\r\n        <template v-slot:top>\r\n          <v-toolbar\r\n            flat\r\n          >\r\n            <v-toolbar-title>สมัครสมาชิก</v-toolbar-title>\r\n            <v-divider\r\n              class=\"mx-4\"\r\n              inset\r\n              vertical\r\n            ></v-divider>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n                  color=\"primary\"\r\n                  dark\r\n                  class=\"mb-2\"\r\n                  @click=\"openDialog('add', defaultItem)\"\r\n                >\r\n                  เพิ่มข้อมูล\r\n                </v-btn>\r\n    \r\n          </v-toolbar>\r\n        </template>\r\n        <template v-slot:[`item.role`]= \"{ item }\">\r\n          {{ item.role === null ? '' : item.role.name }}\r\n        </template>\r\n        <template v-slot:[`item.actions`] = \"{ item }\">\r\n          <v-btn small outlined @click=\"openDialog('edit', item)\" color=\"blue\">\r\n          <v-icon>\r\n            mdi-pencil\r\n          </v-icon>\r\n          </v-btn>\r\n          <v-btn small outlined @click=\"deleteItem(item)\" color=\"red\" class=\"ml-2\">\r\n          <v-icon>\r\n            mdi-delete\r\n          </v-icon>\r\n          </v-btn>\r\n        </template>\r\n        <template v-slot:no-data>\r\n          <v-btn\r\n            color=\"primary\"\r\n            @click=\"initialize\"\r\n          >\r\n            Reset\r\n          </v-btn>\r\n        </template>\r\n      </v-data-table>\r\n      <v-dialog\r\n              v-model=\"dialogCreate\"\r\n              max-width=\"500px\"\r\n            >\r\n              <v-card>\r\n                <v-card-title>\r\n                  <span class=\"text-h5\">{{ formTitle }}</span>\r\n                </v-card-title>\r\n    \r\n                <v-card-text>\r\n                  <v-container>\r\n                    <v-row>\r\n                      <v-col\r\n                        cols=\"12\"\r\n                        sm=\"6\"\r\n                        md=\"6\"\r\n                      >\r\n                        <v-text-field\r\n                          v-model=\"fristName\"\r\n                          label=\"ชื่อ\"\r\n                        ></v-text-field>\r\n                      </v-col>\r\n                      <v-col\r\n                        cols=\"12\"\r\n                        sm=\"6\"\r\n                        md=\"6\"\r\n                      >\r\n                        <v-text-field\r\n                          v-model=\"lastName\"\r\n                          label=\"นามสกุล\"\r\n                        ></v-text-field>\r\n                      </v-col>\r\n                      <v-col\r\n                        cols=\"12\"\r\n                        sm=\"6\"\r\n                        md=\"6\"\r\n                      >\r\n                        <v-text-field\r\n                          v-model=\"salary\"\r\n                          label=\"เงินเดือน\"\r\n                        ></v-text-field>\r\n                      </v-col>\r\n                      <v-col\r\n                        cols=\"12\"\r\n                        sm=\"6\"\r\n                        md=\"6\"\r\n                      >\r\n                        <v-text-field\r\n                          v-model=\"roles\"\r\n                          label=\"ตำแหน่ง\"\r\n                        ></v-text-field>\r\n                      </v-col>\r\n                      <v-col\r\n                        cols=\"12\"\r\n                        sm=\"6\"\r\n                        md=\"6\"\r\n                      >\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-container>\r\n                </v-card-text>\r\n    \r\n                <v-card-actions>\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn\r\n                    color=\"blue darken-1\"\r\n                    text\r\n                    @click=\"close\"\r\n                  >\r\n                    ยกเลิก\r\n                  </v-btn>\r\n                  <v-btn\r\n                    color=\"blue darken-1\"\r\n                    text\r\n                    @click=\"save(formTitle)\"\r\n                  >\r\n                    บันทึกข้อมูล\r\n                  </v-btn>\r\n                </v-card-actions>\r\n              </v-card>\r\n            </v-dialog>\r\n            <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\r\n              <v-card>\r\n                <v-card-title class=\"text-h5\">ตุณต้องการลบข้อมูลนี้ในตารางใช่ หรือ ไม่?</v-card-title>\r\n                <v-card-actions>\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">ยกเลิก</v-btn>\r\n                  <v-btn color=\"blue darken-1\" text @click=\"deleteItemConfirm\">ตกลง</v-btn>\r\n                  <v-spacer></v-spacer>\r\n                </v-card-actions>\r\n              </v-card>\r\n            </v-dialog>\r\n    </div>\r\n    </template>\r\n    \r\n    <script>\r\n    export default {\r\n      data: () => ({\r\n        fristName: '',\r\n        lastName: '',\r\n        salary: '',\r\n        roles: '',\r\n        dialogCreate: false,\r\n        dialogDelete: false,\r\n        headers: [\r\n          {\r\n            text: 'ไอดี',\r\n            align: 'start',\r\n            sortable: false,\r\n            value: 'id'\r\n          },\r\n          { text: 'ชื่อ', value: 'fristName' },\r\n          { text: 'นามสกุล', value: 'lastName' },\r\n          { text: 'เงินเดือน', value: 'salary' },\r\n          { text: 'ตำแหน่ง', value: 'role' },\r\n          { text: 'จัดการ', value: 'actions', sortable: false }\r\n        ],\r\n        employeeItem: [],\r\n        editedIndex: -1,\r\n        editedItem: {\r\n          name: '',\r\n          calories: 0,\r\n          fat: 0,\r\n          carbs: 0,\r\n          protein: 0\r\n        },\r\n        defaultItem: {\r\n          name: '',\r\n          calories: 0,\r\n          fat: 0,\r\n          carbs: 0,\r\n          protein: 0\r\n        },\r\n        formTitle: '',\r\n        idEmployee: '',\r\n        idforDelete: ''\r\n      }),\r\n    \r\n      watch: {\r\n        dialog (val) {\r\n          val || this.close()\r\n        },\r\n        dialogDelete (val) {\r\n          val || this.closeDelete()\r\n        }\r\n      },\r\n    \r\n      created () {\r\n        this.initialize()\r\n      },\r\n    \r\n      methods: {\r\n        async initialize () {\r\n          this.employeeItem = []\r\n          try {\r\n            var data = await this.axios.get('http://localhost:8000/employee')\r\n            console.log('data employee ====>', data)\r\n            this.employeeItem = data.data\r\n          } catch (error) {\r\n    \r\n          }\r\n        },\r\n        openDialog (Action, item) {\r\n          this.formTitle = ''\r\n          if (Action === 'add') {\r\n            this.dialogCreate = true\r\n            this.formTitle = 'เพิ่มข้อมูล'\r\n            this.editedItem = item\r\n          } else {\r\n            this.formTitle = 'แก้ไขข้อมูล'\r\n            this.dialogCreate = true\r\n            this.fristName = item.fristName\r\n            this.lastName = item.lastName\r\n            this.salary = item.salary\r\n            this.roles = item.role.name\r\n            this.idEmployee = item.id\r\n          }\r\n        },\r\n    \r\n        editItem (item) {\r\n          console.log('item select', item)\r\n          this.editedIndex = this.employeeItem.indexOf(item)\r\n          this.editedItem = Object.assign({}, item)\r\n          this.dialog = true\r\n        },\r\n    \r\n        deleteItem (item) {\r\n          this.idforDelete = item.id\r\n          this.dialogDelete = true\r\n        },\r\n    \r\n        async deleteItemConfirm () {\r\n          try {\r\n            var response = await this.axios.delete('http://localhost:8000/employee/' + this.idforDelete)\r\n            this.initialize()\r\n          } catch (error) {\r\n            console.log(error.message)\r\n          }\r\n          this.closeDelete()\r\n        },\r\n    \r\n        close () {\r\n          this.dialogCreate = false\r\n          this.editedItem = []\r\n          this.editedIndex = -1\r\n          this.defaultItem = {\r\n            name: '',\r\n            calories: 0,\r\n            fat: 0,\r\n            carbs: 0,\r\n            protein: 0\r\n          }\r\n        },\r\n    \r\n        closeDelete () {\r\n          this.dialogDelete = false\r\n          this.$nextTick(() => {\r\n            this.editedItem = Object.assign({}, this.defaultItem)\r\n            this.editedIndex = -1\r\n          })\r\n        },\r\n    \r\n        async save (action) {\r\n          var data = {\r\n            fristName: this.fristName,\r\n            lastName: this.lastName,\r\n            salary: this.salary,\r\n            role: {\r\n              name: this.roles\r\n            },\r\n            skills: [\r\n              { skill: '' }\r\n            ]\r\n          }\r\n          if (action === 'เพิ่มข้อมูล') {\r\n            try {\r\n              var dataResponse = await this.axios.post('http://localhost:8000/employee', data)\r\n              console.log('dataResponse ====>', dataResponse)\r\n              this.close()\r\n              this.initialize()\r\n            } catch (error) {\r\n              console.log(error.message)\r\n            }\r\n          } else {\r\n            try {\r\n              var dataResponse = await this.axios.put('http://localhost:8000/employee/' + this.idEmployee, data)\r\n              console.log('dataResponse ====>', dataResponse)\r\n              this.close()\r\n              this.initialize()\r\n            } catch (error) {\r\n              console.log(error.message)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    </script>\r\n    \r\n    <style>\r\n    \r\n    </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}